# Анти-брутфорс сервис

Сервис предназначен для борьбы с подбором паролей при авторизации в какой-либо системе.

Сервис вызывается перед авторизацией пользователя и может либо разрешить, либо заблокировать попытку.

Предполагается, что сервис используется только для server-server, т.е. скрыт от конечного пользователя.

## Алгоритм работы

Сервис ограничивает частоту попыток авторизации для различных комбинаций параметров, например:

* не более N = 10 попыток в минуту для данного логина.
* не более M = 100 попыток в минуту для данного пароля (защита от обратного brute-force).
* не более K = 1000 попыток в минуту для данного IP (число большое, т.к. NAT).

Сервис поддерживает множество bucket-ов, по одному на каждый логин/пароль/ip.

White/black листы содержат списки адресов сетей, которые обрабатываются более простым способом:

* Если входящий IP в whitelist, то сервис безусловно разрешает авторизацию (ok=true);
* Если - в blacklist, то отклоняет (ok=false).

## Запуск

* Скопировать _deployments/.env.example_ в _deployments/.env_
* Запустить `make run`

## Команды

`make build` - сборка проекта в bin/app

`make run` - сборка и запуск проекта в докер контейнерах

`make down` - остановка и удаление докер контейнеров

`make test` - запуск юнит тестов

`make test_integrate` - запуск интеграционных тестов

`make lint` - запуска линтера кода
